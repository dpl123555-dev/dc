n=1e4;
snr_db=0:5:20;
l=5;

b=randi([0 1],1,n);
p=ones(1,l);
tx=kron(b,p);

for k=1:length(snr_db)
    snr=10^(snr_db(k)/10);
    r=tx+sqrt(1/(2*snr))*randn(1,length(tx));
    y=conv(r,p,'same');
    rx=y(l:l:end)>l/2;
    BER(k)=mean(rx ~=b);

end

semilogy(snr_db,BER,'o-');
grid on;
xlabel("SNR");
ylabel("BER");


